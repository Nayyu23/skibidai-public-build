{"ast":null,"code":"import _classCallCheck from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Object3D, Vector2, Vector3, Matrix4 } from \"three\";\nvar CSS2DObject = /*#__PURE__*/function (_Object3D) {\n  _inherits(CSS2DObject, _Object3D);\n  var _super = _createSuper(CSS2DObject);\n  function CSS2DObject() {\n    var _this2;\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.createElement(\"div\");\n    _classCallCheck(this, CSS2DObject);\n    _this2 = _super.call(this);\n    _this2.isCSS2DObject = true;\n    _this2.element = element;\n    _this2.element.style.position = \"absolute\";\n    _this2.element.style.userSelect = \"none\";\n    _this2.element.setAttribute(\"draggable\", false);\n    _this2.center = new Vector2(0.5, 0.5);\n    _this2.addEventListener(\"removed\", function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n    return _this2;\n  }\n  _createClass(CSS2DObject, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS2DObject.prototype), \"copy\", this).call(this, source, recursive);\n      this.element = source.element.cloneNode(true);\n      this.center = source.center;\n      return this;\n    }\n  }]);\n  return CSS2DObject;\n}(Object3D);\nvar _vector = new Vector3();\nvar _viewMatrix = new Matrix4();\nvar _viewProjectionMatrix = new Matrix4();\nvar _a = new Vector3();\nvar _b = new Vector3();\nvar CSS2DRenderer = /*#__PURE__*/_createClass(function CSS2DRenderer() {\n  var parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  _classCallCheck(this, CSS2DRenderer);\n  var _this = this;\n  var _width, _height;\n  var _widthHalf, _heightHalf;\n  var cache = {\n    objects: /* @__PURE__ */new WeakMap()\n  };\n  var domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n  domElement.style.overflow = \"hidden\";\n  this.domElement = domElement;\n  this.getSize = function () {\n    return {\n      width: _width,\n      height: _height\n    };\n  };\n  this.render = function (scene, camera) {\n    if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n    _viewMatrix.copy(camera.matrixWorldInverse);\n    _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\n    renderObject(scene, scene, camera);\n    zOrder(scene);\n  };\n  this.setSize = function (width, height) {\n    _width = width;\n    _height = height;\n    _widthHalf = _width / 2;\n    _heightHalf = _height / 2;\n    domElement.style.width = width + \"px\";\n    domElement.style.height = height + \"px\";\n  };\n  function renderObject(object, scene, camera) {\n    if (object.isCSS2DObject) {\n      _vector.setFromMatrixPosition(object.matrixWorld);\n      _vector.applyMatrix4(_viewProjectionMatrix);\n      var visible = object.visible === true && _vector.z >= -1 && _vector.z <= 1 && object.layers.test(camera.layers) === true;\n      object.element.style.display = visible === true ? \"\" : \"none\";\n      if (visible === true) {\n        object.onBeforeRender(_this, scene, camera);\n        var element = object.element;\n        element.style.transform = \"translate(\" + -100 * object.center.x + \"%,\" + -100 * object.center.y + \"%)translate(\" + (_vector.x * _widthHalf + _widthHalf) + \"px,\" + (-_vector.y * _heightHalf + _heightHalf) + \"px)\";\n        if (element.parentNode !== domElement) {\n          domElement.appendChild(element);\n        }\n        object.onAfterRender(_this, scene, camera);\n      }\n      var objectData = {\n        distanceToCameraSquared: getDistanceToSquared(camera, object)\n      };\n      cache.objects.set(object, objectData);\n    }\n    for (var i = 0, l = object.children.length; i < l; i++) {\n      renderObject(object.children[i], scene, camera);\n    }\n  }\n  function getDistanceToSquared(object1, object2) {\n    _a.setFromMatrixPosition(object1.matrixWorld);\n    _b.setFromMatrixPosition(object2.matrixWorld);\n    return _a.distanceToSquared(_b);\n  }\n  function filterAndFlatten(scene) {\n    var result = [];\n    scene.traverse(function (object) {\n      if (object.isCSS2DObject) result.push(object);\n    });\n    return result;\n  }\n  function zOrder(scene) {\n    var sorted = filterAndFlatten(scene).sort(function (a, b) {\n      if (a.renderOrder !== b.renderOrder) {\n        return b.renderOrder - a.renderOrder;\n      }\n      var distanceA = cache.objects.get(a).distanceToCameraSquared;\n      var distanceB = cache.objects.get(b).distanceToCameraSquared;\n      return distanceA - distanceB;\n    });\n    var zMax = sorted.length;\n    for (var i = 0, l = sorted.length; i < l; i++) {\n      sorted[i].element.style.zIndex = zMax - i;\n    }\n  }\n});\nexport { CSS2DObject, CSS2DRenderer };","map":{"version":3,"names":["CSS2DObject","_Object3D","_inherits","_super","_createSuper","_this2","element","arguments","length","undefined","document","createElement","_classCallCheck","call","isCSS2DObject","style","position","userSelect","setAttribute","center","Vector2","addEventListener","traverse","object","Element","parentNode","removeChild","_createClass","key","value","copy","source","recursive","_get","_getPrototypeOf","prototype","cloneNode","Object3D","_vector","Vector3","_viewMatrix","Matrix4","_viewProjectionMatrix","_a","_b","CSS2DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","objects","WeakMap","domElement","overflow","getSize","width","height","render","scene","camera","matrixWorldAutoUpdate","updateMatrixWorld","parent","matrixWorldInverse","multiplyMatrices","projectionMatrix","renderObject","zOrder","setSize","setFromMatrixPosition","matrixWorld","applyMatrix4","visible","z","layers","test","display","onBeforeRender","transform","x","y","appendChild","onAfterRender","objectData","distanceToCameraSquared","getDistanceToSquared","set","i","l","children","object1","object2","distanceToSquared","filterAndFlatten","result","push","sorted","sort","a","b","renderOrder","distanceA","get","distanceB","zMax","zIndex"],"sources":["C:\\Users\\Nayyu\\Desktop\\skibidai-public-build\\node_modules\\src\\renderers\\CSS2DRenderer.js"],"sourcesContent":["import { Matrix4, Object3D, Vector2, Vector3 } from 'three'\n\nclass CSS2DObject extends Object3D {\n  constructor(element = document.createElement('div')) {\n    super()\n\n    this.isCSS2DObject = true\n\n    this.element = element\n\n    this.element.style.position = 'absolute'\n    this.element.style.userSelect = 'none'\n\n    this.element.setAttribute('draggable', false)\n\n    this.center = new Vector2(0.5, 0.5) // ( 0, 0 ) is the lower left; ( 1, 1 ) is the top right\n\n    this.addEventListener('removed', function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element)\n        }\n      })\n    })\n  }\n\n  copy(source, recursive) {\n    super.copy(source, recursive)\n\n    this.element = source.element.cloneNode(true)\n\n    this.center = source.center\n\n    return this\n  }\n}\n\nconst _vector = new Vector3()\nconst _viewMatrix = new Matrix4()\nconst _viewProjectionMatrix = new Matrix4()\nconst _a = new Vector3()\nconst _b = new Vector3()\n\nclass CSS2DRenderer {\n  constructor(parameters = {}) {\n    const _this = this\n\n    let _width, _height\n    let _widthHalf, _heightHalf\n\n    const cache = {\n      objects: new WeakMap(),\n    }\n\n    const domElement = parameters.element !== undefined ? parameters.element : document.createElement('div')\n\n    domElement.style.overflow = 'hidden'\n\n    this.domElement = domElement\n\n    this.getSize = function () {\n      return {\n        width: _width,\n        height: _height,\n      }\n    }\n\n    this.render = function (scene, camera) {\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld()\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld()\n\n      _viewMatrix.copy(camera.matrixWorldInverse)\n      _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix)\n\n      renderObject(scene, scene, camera)\n      zOrder(scene)\n    }\n\n    this.setSize = function (width, height) {\n      _width = width\n      _height = height\n\n      _widthHalf = _width / 2\n      _heightHalf = _height / 2\n\n      domElement.style.width = width + 'px'\n      domElement.style.height = height + 'px'\n    }\n\n    function renderObject(object, scene, camera) {\n      if (object.isCSS2DObject) {\n        _vector.setFromMatrixPosition(object.matrixWorld)\n        _vector.applyMatrix4(_viewProjectionMatrix)\n\n        const visible =\n          object.visible === true && _vector.z >= -1 && _vector.z <= 1 && object.layers.test(camera.layers) === true\n        object.element.style.display = visible === true ? '' : 'none'\n\n        if (visible === true) {\n          object.onBeforeRender(_this, scene, camera)\n\n          const element = object.element\n\n          element.style.transform =\n            'translate(' +\n            -100 * object.center.x +\n            '%,' +\n            -100 * object.center.y +\n            '%)' +\n            'translate(' +\n            (_vector.x * _widthHalf + _widthHalf) +\n            'px,' +\n            (-_vector.y * _heightHalf + _heightHalf) +\n            'px)'\n\n          if (element.parentNode !== domElement) {\n            domElement.appendChild(element)\n          }\n\n          object.onAfterRender(_this, scene, camera)\n        }\n\n        const objectData = {\n          distanceToCameraSquared: getDistanceToSquared(camera, object),\n        }\n\n        cache.objects.set(object, objectData)\n      }\n\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        renderObject(object.children[i], scene, camera)\n      }\n    }\n\n    function getDistanceToSquared(object1, object2) {\n      _a.setFromMatrixPosition(object1.matrixWorld)\n      _b.setFromMatrixPosition(object2.matrixWorld)\n\n      return _a.distanceToSquared(_b)\n    }\n\n    function filterAndFlatten(scene) {\n      const result = []\n\n      scene.traverse(function (object) {\n        if (object.isCSS2DObject) result.push(object)\n      })\n\n      return result\n    }\n\n    function zOrder(scene) {\n      const sorted = filterAndFlatten(scene).sort(function (a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n          return b.renderOrder - a.renderOrder\n        }\n\n        const distanceA = cache.objects.get(a).distanceToCameraSquared\n        const distanceB = cache.objects.get(b).distanceToCameraSquared\n\n        return distanceA - distanceB\n      })\n\n      const zMax = sorted.length\n\n      for (let i = 0, l = sorted.length; i < l; i++) {\n        sorted[i].element.style.zIndex = zMax - i\n      }\n    }\n  }\n}\n\nexport { CSS2DObject, CSS2DRenderer }\n"],"mappings":";;;;;;;IAEMA,WAAA,0BAAAC,SAAA;EAAAC,SAAA,CAAAF,WAAA,EAAAC,SAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,WAAA;EACJ,SAAAA,YAAA,EAAqD;IAAA,IAAAK,MAAA;IAAA,IAAzCC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAUG,QAAA,CAASC,aAAA,CAAc,KAAK;IAAAC,eAAA,OAAAZ,WAAA;IAChDK,MAAA,GAAAF,MAAA,CAAAU,IAAA;IAEAR,MAAA,CAAKS,aAAA,GAAgB;IAErBT,MAAA,CAAKC,OAAA,GAAUA,OAAA;IAEfD,MAAA,CAAKC,OAAA,CAAQS,KAAA,CAAMC,QAAA,GAAW;IAC9BX,MAAA,CAAKC,OAAA,CAAQS,KAAA,CAAME,UAAA,GAAa;IAEhCZ,MAAA,CAAKC,OAAA,CAAQY,YAAA,CAAa,aAAa,KAAK;IAE5Cb,MAAA,CAAKc,MAAA,GAAS,IAAIC,OAAA,CAAQ,KAAK,GAAG;IAElCf,MAAA,CAAKgB,gBAAA,CAAiB,WAAW,YAAY;MAC3C,KAAKC,QAAA,CAAS,UAAUC,MAAA,EAAQ;QAC9B,IAAIA,MAAA,CAAOjB,OAAA,YAAmBkB,OAAA,IAAWD,MAAA,CAAOjB,OAAA,CAAQmB,UAAA,KAAe,MAAM;UAC3EF,MAAA,CAAOjB,OAAA,CAAQmB,UAAA,CAAWC,WAAA,CAAYH,MAAA,CAAOjB,OAAO;QACrD;MACT,CAAO;IACP,CAAK;IAAA,OAAAD,MAAA;EACF;EAAAsB,YAAA,CAAA3B,WAAA;IAAA4B,GAAA;IAAAC,KAAA,EAED,SAAAC,KAAKC,MAAA,EAAQC,SAAA,EAAW;MACtBC,IAAA,CAAAC,eAAA,CAAAlC,WAAA,CAAAmC,SAAA,iBAAAtB,IAAA,OAAWkB,MAAA,EAAQC,SAAS;MAE5B,KAAK1B,OAAA,GAAUyB,MAAA,CAAOzB,OAAA,CAAQ8B,SAAA,CAAU,IAAI;MAE5C,KAAKjB,MAAA,GAASY,MAAA,CAAOZ,MAAA;MAErB,OAAO;IACR;EAAA;EAAA,OAAAnB,WAAA;AAAA,EAhCuBqC,QAAA;AAmC1B,IAAMC,OAAA,GAAU,IAAIC,OAAA,CAAS;AAC7B,IAAMC,WAAA,GAAc,IAAIC,OAAA,CAAS;AACjC,IAAMC,qBAAA,GAAwB,IAAID,OAAA,CAAS;AAC3C,IAAME,EAAA,GAAK,IAAIJ,OAAA,CAAS;AACxB,IAAMK,EAAA,GAAK,IAAIL,OAAA,CAAS;AAAA,IAElBM,aAAA,gBAAAlB,YAAA,CACJ,SAAAkB,cAAA,EAA6B;EAAA,IAAjBC,UAAA,GAAAvC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAa;EAAAK,eAAA,OAAAiC,aAAA;EACvB,IAAME,KAAA,GAAQ;EAEd,IAAIC,MAAA,EAAQC,OAAA;EACZ,IAAIC,UAAA,EAAYC,WAAA;EAEhB,IAAMC,KAAA,GAAQ;IACZC,OAAA,EAAS,mBAAIC,OAAA,CAAS;EACvB;EAED,IAAMC,UAAA,GAAaT,UAAA,CAAWxC,OAAA,KAAY,SAAYwC,UAAA,CAAWxC,OAAA,GAAUI,QAAA,CAASC,aAAA,CAAc,KAAK;EAEvG4C,UAAA,CAAWxC,KAAA,CAAMyC,QAAA,GAAW;EAE5B,KAAKD,UAAA,GAAaA,UAAA;EAElB,KAAKE,OAAA,GAAU,YAAY;IACzB,OAAO;MACLC,KAAA,EAAOV,MAAA;MACPW,MAAA,EAAQV;IACT;EACF;EAED,KAAKW,MAAA,GAAS,UAAUC,KAAA,EAAOC,MAAA,EAAQ;IACrC,IAAID,KAAA,CAAME,qBAAA,KAA0B,MAAMF,KAAA,CAAMG,iBAAA,CAAmB;IACnE,IAAIF,MAAA,CAAOG,MAAA,KAAW,QAAQH,MAAA,CAAOC,qBAAA,KAA0B,MAAMD,MAAA,CAAOE,iBAAA,CAAmB;IAE/FxB,WAAA,CAAYV,IAAA,CAAKgC,MAAA,CAAOI,kBAAkB;IAC1CxB,qBAAA,CAAsByB,gBAAA,CAAiBL,MAAA,CAAOM,gBAAA,EAAkB5B,WAAW;IAE3E6B,YAAA,CAAaR,KAAA,EAAOA,KAAA,EAAOC,MAAM;IACjCQ,MAAA,CAAOT,KAAK;EACb;EAED,KAAKU,OAAA,GAAU,UAAUb,KAAA,EAAOC,MAAA,EAAQ;IACtCX,MAAA,GAASU,KAAA;IACTT,OAAA,GAAUU,MAAA;IAEVT,UAAA,GAAaF,MAAA,GAAS;IACtBG,WAAA,GAAcF,OAAA,GAAU;IAExBM,UAAA,CAAWxC,KAAA,CAAM2C,KAAA,GAAQA,KAAA,GAAQ;IACjCH,UAAA,CAAWxC,KAAA,CAAM4C,MAAA,GAASA,MAAA,GAAS;EACpC;EAED,SAASU,aAAa9C,MAAA,EAAQsC,KAAA,EAAOC,MAAA,EAAQ;IAC3C,IAAIvC,MAAA,CAAOT,aAAA,EAAe;MACxBwB,OAAA,CAAQkC,qBAAA,CAAsBjD,MAAA,CAAOkD,WAAW;MAChDnC,OAAA,CAAQoC,YAAA,CAAahC,qBAAqB;MAE1C,IAAMiC,OAAA,GACJpD,MAAA,CAAOoD,OAAA,KAAY,QAAQrC,OAAA,CAAQsC,CAAA,IAAK,MAAMtC,OAAA,CAAQsC,CAAA,IAAK,KAAKrD,MAAA,CAAOsD,MAAA,CAAOC,IAAA,CAAKhB,MAAA,CAAOe,MAAM,MAAM;MACxGtD,MAAA,CAAOjB,OAAA,CAAQS,KAAA,CAAMgE,OAAA,GAAUJ,OAAA,KAAY,OAAO,KAAK;MAEvD,IAAIA,OAAA,KAAY,MAAM;QACpBpD,MAAA,CAAOyD,cAAA,CAAejC,KAAA,EAAOc,KAAA,EAAOC,MAAM;QAE1C,IAAMxD,OAAA,GAAUiB,MAAA,CAAOjB,OAAA;QAEvBA,OAAA,CAAQS,KAAA,CAAMkE,SAAA,GACZ,eACA,OAAO1D,MAAA,CAAOJ,MAAA,CAAO+D,CAAA,GACrB,OACA,OAAO3D,MAAA,CAAOJ,MAAA,CAAOgE,CAAA,GACrB,kBAEC7C,OAAA,CAAQ4C,CAAA,GAAIhC,UAAA,GAAaA,UAAA,IAC1B,SACC,CAACZ,OAAA,CAAQ6C,CAAA,GAAIhC,WAAA,GAAcA,WAAA,IAC5B;QAEF,IAAI7C,OAAA,CAAQmB,UAAA,KAAe8B,UAAA,EAAY;UACrCA,UAAA,CAAW6B,WAAA,CAAY9E,OAAO;QAC/B;QAEDiB,MAAA,CAAO8D,aAAA,CAActC,KAAA,EAAOc,KAAA,EAAOC,MAAM;MAC1C;MAED,IAAMwB,UAAA,GAAa;QACjBC,uBAAA,EAAyBC,oBAAA,CAAqB1B,MAAA,EAAQvC,MAAM;MAC7D;MAED6B,KAAA,CAAMC,OAAA,CAAQoC,GAAA,CAAIlE,MAAA,EAAQ+D,UAAU;IACrC;IAED,SAASI,CAAA,GAAI,GAAGC,CAAA,GAAIpE,MAAA,CAAOqE,QAAA,CAASpF,MAAA,EAAQkF,CAAA,GAAIC,CAAA,EAAGD,CAAA,IAAK;MACtDrB,YAAA,CAAa9C,MAAA,CAAOqE,QAAA,CAASF,CAAC,GAAG7B,KAAA,EAAOC,MAAM;IAC/C;EACF;EAED,SAAS0B,qBAAqBK,OAAA,EAASC,OAAA,EAAS;IAC9CnD,EAAA,CAAG6B,qBAAA,CAAsBqB,OAAA,CAAQpB,WAAW;IAC5C7B,EAAA,CAAG4B,qBAAA,CAAsBsB,OAAA,CAAQrB,WAAW;IAE5C,OAAO9B,EAAA,CAAGoD,iBAAA,CAAkBnD,EAAE;EAC/B;EAED,SAASoD,iBAAiBnC,KAAA,EAAO;IAC/B,IAAMoC,MAAA,GAAS,EAAE;IAEjBpC,KAAA,CAAMvC,QAAA,CAAS,UAAUC,MAAA,EAAQ;MAC/B,IAAIA,MAAA,CAAOT,aAAA,EAAemF,MAAA,CAAOC,IAAA,CAAK3E,MAAM;IACpD,CAAO;IAED,OAAO0E,MAAA;EACR;EAED,SAAS3B,OAAOT,KAAA,EAAO;IACrB,IAAMsC,MAAA,GAASH,gBAAA,CAAiBnC,KAAK,EAAEuC,IAAA,CAAK,UAAUC,CAAA,EAAGC,CAAA,EAAG;MAC1D,IAAID,CAAA,CAAEE,WAAA,KAAgBD,CAAA,CAAEC,WAAA,EAAa;QACnC,OAAOD,CAAA,CAAEC,WAAA,GAAcF,CAAA,CAAEE,WAAA;MAC1B;MAED,IAAMC,SAAA,GAAYpD,KAAA,CAAMC,OAAA,CAAQoD,GAAA,CAAIJ,CAAC,EAAEd,uBAAA;MACvC,IAAMmB,SAAA,GAAYtD,KAAA,CAAMC,OAAA,CAAQoD,GAAA,CAAIH,CAAC,EAAEf,uBAAA;MAEvC,OAAOiB,SAAA,GAAYE,SAAA;IAC3B,CAAO;IAED,IAAMC,IAAA,GAAOR,MAAA,CAAO3F,MAAA;IAEpB,SAASkF,CAAA,GAAI,GAAGC,CAAA,GAAIQ,MAAA,CAAO3F,MAAA,EAAQkF,CAAA,GAAIC,CAAA,EAAGD,CAAA,IAAK;MAC7CS,MAAA,CAAOT,CAAC,EAAEpF,OAAA,CAAQS,KAAA,CAAM6F,MAAA,GAASD,IAAA,GAAOjB,CAAA;IACzC;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}