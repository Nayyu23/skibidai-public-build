{"ast":null,"code":"import _createClass from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Vector2, Group, Raycaster, Matrix4 } from \"three\";\nvar _pointer = new Vector2();\nvar _event = {\n  type: \"\",\n  data: _pointer\n};\nvar InteractiveGroup = /*#__PURE__*/function (_Group) {\n  _inherits(InteractiveGroup, _Group);\n  var _super = _createSuper(InteractiveGroup);\n  function InteractiveGroup(renderer, camera) {\n    var _this;\n    _classCallCheck(this, InteractiveGroup);\n    _this = _super.call(this);\n    var scope = _assertThisInitialized(_this);\n    var raycaster = new Raycaster();\n    var tempMatrix = new Matrix4();\n    var element = renderer.domElement;\n    function onPointerEvent(event) {\n      event.stopPropagation();\n      _pointer.x = event.clientX / element.clientWidth * 2 - 1;\n      _pointer.y = -(event.clientY / element.clientHeight) * 2 + 1;\n      raycaster.setFromCamera(_pointer, camera);\n      var intersects = raycaster.intersectObjects(scope.children, false);\n      if (intersects.length > 0) {\n        var intersection = intersects[0];\n        var object = intersection.object;\n        var uv = intersection.uv;\n        _event.type = event.type;\n        _event.data.set(uv.x, 1 - uv.y);\n        object.dispatchEvent(_event);\n      }\n    }\n    element.addEventListener(\"pointerdown\", onPointerEvent);\n    element.addEventListener(\"pointerup\", onPointerEvent);\n    element.addEventListener(\"pointermove\", onPointerEvent);\n    element.addEventListener(\"mousedown\", onPointerEvent);\n    element.addEventListener(\"mouseup\", onPointerEvent);\n    element.addEventListener(\"mousemove\", onPointerEvent);\n    element.addEventListener(\"click\", onPointerEvent);\n    var events = {\n      move: \"mousemove\",\n      select: \"click\",\n      selectstart: \"mousedown\",\n      selectend: \"mouseup\"\n    };\n    function onXRControllerEvent(event) {\n      var controller = event.target;\n      tempMatrix.identity().extractRotation(controller.matrixWorld);\n      raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\n      raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);\n      var intersections = raycaster.intersectObjects(scope.children, false);\n      if (intersections.length > 0) {\n        var intersection = intersections[0];\n        var object = intersection.object;\n        var uv = intersection.uv;\n        _event.type = events[event.type];\n        _event.data.set(uv.x, 1 - uv.y);\n        object.dispatchEvent(_event);\n      }\n    }\n    var controller1 = renderer.xr.getController(0);\n    controller1.addEventListener(\"move\", onXRControllerEvent);\n    controller1.addEventListener(\"select\", onXRControllerEvent);\n    controller1.addEventListener(\"selectstart\", onXRControllerEvent);\n    controller1.addEventListener(\"selectend\", onXRControllerEvent);\n    var controller2 = renderer.xr.getController(1);\n    controller2.addEventListener(\"move\", onXRControllerEvent);\n    controller2.addEventListener(\"select\", onXRControllerEvent);\n    controller2.addEventListener(\"selectstart\", onXRControllerEvent);\n    controller2.addEventListener(\"selectend\", onXRControllerEvent);\n    return _this;\n  }\n  return _createClass(InteractiveGroup);\n}(Group);\nexport { InteractiveGroup };","map":{"version":3,"names":["_pointer","Vector2","_event","type","data","InteractiveGroup","_Group","_inherits","_super","_createSuper","renderer","camera","_this","_classCallCheck","call","scope","_assertThisInitialized","raycaster","Raycaster","tempMatrix","Matrix4","element","domElement","onPointerEvent","event","stopPropagation","x","clientX","clientWidth","y","clientY","clientHeight","setFromCamera","intersects","intersectObjects","children","length","intersection","object","uv","set","dispatchEvent","addEventListener","events","move","select","selectstart","selectend","onXRControllerEvent","controller","target","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","intersections","controller1","xr","getController","controller2","_createClass","Group"],"sources":["C:\\Users\\Nayyu\\Desktop\\skibidai-public-build\\node_modules\\src\\interactive\\InteractiveGroup.js"],"sourcesContent":["import { Group, Matrix4, Raycaster, Vector2 } from 'three'\n\nconst _pointer = new Vector2()\nconst _event = { type: '', data: _pointer }\n\nclass InteractiveGroup extends Group {\n  constructor(renderer, camera) {\n    super()\n\n    const scope = this\n\n    const raycaster = new Raycaster()\n    const tempMatrix = new Matrix4()\n\n    // Pointer Events\n\n    const element = renderer.domElement\n\n    function onPointerEvent(event) {\n      event.stopPropagation()\n\n      _pointer.x = (event.clientX / element.clientWidth) * 2 - 1\n      _pointer.y = -(event.clientY / element.clientHeight) * 2 + 1\n\n      raycaster.setFromCamera(_pointer, camera)\n\n      const intersects = raycaster.intersectObjects(scope.children, false)\n\n      if (intersects.length > 0) {\n        const intersection = intersects[0]\n\n        const object = intersection.object\n        const uv = intersection.uv\n\n        _event.type = event.type\n        _event.data.set(uv.x, 1 - uv.y)\n\n        object.dispatchEvent(_event)\n      }\n    }\n\n    element.addEventListener('pointerdown', onPointerEvent)\n    element.addEventListener('pointerup', onPointerEvent)\n    element.addEventListener('pointermove', onPointerEvent)\n    element.addEventListener('mousedown', onPointerEvent)\n    element.addEventListener('mouseup', onPointerEvent)\n    element.addEventListener('mousemove', onPointerEvent)\n    element.addEventListener('click', onPointerEvent)\n\n    // WebXR Controller Events\n    // TODO: Dispatch pointerevents too\n\n    const events = {\n      move: 'mousemove',\n      select: 'click',\n      selectstart: 'mousedown',\n      selectend: 'mouseup',\n    }\n\n    function onXRControllerEvent(event) {\n      const controller = event.target\n\n      tempMatrix.identity().extractRotation(controller.matrixWorld)\n\n      raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld)\n      raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix)\n\n      const intersections = raycaster.intersectObjects(scope.children, false)\n\n      if (intersections.length > 0) {\n        const intersection = intersections[0]\n\n        const object = intersection.object\n        const uv = intersection.uv\n\n        _event.type = events[event.type]\n        _event.data.set(uv.x, 1 - uv.y)\n\n        object.dispatchEvent(_event)\n      }\n    }\n\n    const controller1 = renderer.xr.getController(0)\n    controller1.addEventListener('move', onXRControllerEvent)\n    controller1.addEventListener('select', onXRControllerEvent)\n    controller1.addEventListener('selectstart', onXRControllerEvent)\n    controller1.addEventListener('selectend', onXRControllerEvent)\n\n    const controller2 = renderer.xr.getController(1)\n    controller2.addEventListener('move', onXRControllerEvent)\n    controller2.addEventListener('select', onXRControllerEvent)\n    controller2.addEventListener('selectstart', onXRControllerEvent)\n    controller2.addEventListener('selectend', onXRControllerEvent)\n  }\n}\n\nexport { InteractiveGroup }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}