{"ast":null,"code":"import _createClass from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport { Matrix3, OrthographicCamera, Scene, StereoCamera, WebGLRenderTarget, ShaderMaterial, REVISION, Mesh, PlaneGeometry, LinearFilter, NearestFilter, RGBAFormat } from \"three\";\nvar AnaglyphEffect = /*#__PURE__*/_createClass(function AnaglyphEffect(renderer) {\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 512;\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 512;\n  _classCallCheck(this, AnaglyphEffect);\n  this.colorMatrixLeft = new Matrix3().fromArray([0.4561, -0.0400822, -0.0152161, 0.500484, -0.0378246, -0.0205971, 0.176381, -0.0157589, -546856e-8]);\n  this.colorMatrixRight = new Matrix3().fromArray([-0.0434706, 0.378476, -0.0721527, -0.0879388, 0.73364, -0.112961, -155529e-8, -0.0184503, 1.2264]);\n  var _camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var _scene = new Scene();\n  var _stereo = new StereoCamera();\n  var _params = {\n    minFilter: LinearFilter,\n    magFilter: NearestFilter,\n    format: RGBAFormat\n  };\n  var _renderTargetL = new WebGLRenderTarget(width, height, _params);\n  var _renderTargetR = new WebGLRenderTarget(width, height, _params);\n  var _material = new ShaderMaterial({\n    uniforms: {\n      mapLeft: {\n        value: _renderTargetL.texture\n      },\n      mapRight: {\n        value: _renderTargetR.texture\n      },\n      colorMatrixLeft: {\n        value: this.colorMatrixLeft\n      },\n      colorMatrixRight: {\n        value: this.colorMatrixRight\n      }\n    },\n    vertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"\tvUv = vec2( uv.x, uv.y );\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n    fragmentShader: [\"uniform sampler2D mapLeft;\", \"uniform sampler2D mapRight;\", \"varying vec2 vUv;\", \"uniform mat3 colorMatrixLeft;\", \"uniform mat3 colorMatrixRight;\", \"void main() {\", \"\tvec2 uv = vUv;\", \"\tvec4 colorL = texture2D( mapLeft, uv );\", \"\tvec4 colorR = texture2D( mapRight, uv );\", \"\tvec3 color = clamp(\", \"\t\t\tcolorMatrixLeft * colorL.rgb +\", \"\t\t\tcolorMatrixRight * colorR.rgb, 0., 1. );\", \"\tgl_FragColor = vec4(\", \"\t\t\tcolor.r, color.g, color.b,\", \"\t\t\tmax( colorL.a, colorR.a ) );\", \"\t#include <tonemapping_fragment>\", \"\\t#include <\".concat(parseInt(REVISION.replace(/\\D+/g, \"\")) >= 154 ? \"colorspace_fragment\" : \"encodings_fragment\", \">\"), \"}\"].join(\"\\n\")\n  });\n  var _mesh = new Mesh(new PlaneGeometry(2, 2), _material);\n  _scene.add(_mesh);\n  this.setSize = function (width2, height2) {\n    renderer.setSize(width2, height2);\n    var pixelRatio = renderer.getPixelRatio();\n    _renderTargetL.setSize(width2 * pixelRatio, height2 * pixelRatio);\n    _renderTargetR.setSize(width2 * pixelRatio, height2 * pixelRatio);\n  };\n  this.render = function (scene, camera) {\n    var currentRenderTarget = renderer.getRenderTarget();\n    if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n    _stereo.update(camera);\n    renderer.setRenderTarget(_renderTargetL);\n    renderer.clear();\n    renderer.render(scene, _stereo.cameraL);\n    renderer.setRenderTarget(_renderTargetR);\n    renderer.clear();\n    renderer.render(scene, _stereo.cameraR);\n    renderer.setRenderTarget(null);\n    renderer.render(_scene, _camera);\n    renderer.setRenderTarget(currentRenderTarget);\n  };\n  this.dispose = function () {\n    _renderTargetL.dispose();\n    _renderTargetR.dispose();\n    _mesh.geometry.dispose();\n    _mesh.material.dispose();\n  };\n});\nexport { AnaglyphEffect };","map":{"version":3,"names":["AnaglyphEffect","_createClass","renderer","width","arguments","length","undefined","height","_classCallCheck","colorMatrixLeft","Matrix3","fromArray","colorMatrixRight","_camera","OrthographicCamera","_scene","Scene","_stereo","StereoCamera","_params","minFilter","LinearFilter","magFilter","NearestFilter","format","RGBAFormat","_renderTargetL","WebGLRenderTarget","_renderTargetR","_material","ShaderMaterial","uniforms","mapLeft","value","texture","mapRight","vertexShader","join","fragmentShader","concat","parseInt","REVISION","replace","_mesh","Mesh","PlaneGeometry","add","setSize","width2","height2","pixelRatio","getPixelRatio","render","scene","camera","currentRenderTarget","getRenderTarget","matrixWorldAutoUpdate","updateMatrixWorld","parent","update","setRenderTarget","clear","cameraL","cameraR","dispose","geometry","material"],"sources":["C:\\Users\\Nayyu\\Desktop\\skibidai-public-build\\node_modules\\src\\effects\\AnaglyphEffect.js"],"sourcesContent":["import {\n  LinearFilter,\n  Matrix3,\n  Mesh,\n  NearestFilter,\n  OrthographicCamera,\n  PlaneGeometry,\n  RGBAFormat,\n  Scene,\n  ShaderMaterial,\n  StereoCamera,\n  WebGLRenderTarget,\n  REVISION,\n} from 'three'\n\nclass AnaglyphEffect {\n  constructor(renderer, width = 512, height = 512) {\n    // Dubois matrices from https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.7.6968&rep=rep1&type=pdf#page=4\n\n    this.colorMatrixLeft = new Matrix3().fromArray([\n      0.4561,\n      -0.0400822,\n      -0.0152161,\n      0.500484,\n      -0.0378246,\n      -0.0205971,\n      0.176381,\n      -0.0157589,\n      -0.00546856,\n    ])\n\n    this.colorMatrixRight = new Matrix3().fromArray([\n      -0.0434706,\n      0.378476,\n      -0.0721527,\n      -0.0879388,\n      0.73364,\n      -0.112961,\n      -0.00155529,\n      -0.0184503,\n      1.2264,\n    ])\n\n    const _camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1)\n\n    const _scene = new Scene()\n\n    const _stereo = new StereoCamera()\n\n    const _params = { minFilter: LinearFilter, magFilter: NearestFilter, format: RGBAFormat }\n\n    const _renderTargetL = new WebGLRenderTarget(width, height, _params)\n    const _renderTargetR = new WebGLRenderTarget(width, height, _params)\n\n    const _material = new ShaderMaterial({\n      uniforms: {\n        mapLeft: { value: _renderTargetL.texture },\n        mapRight: { value: _renderTargetR.texture },\n\n        colorMatrixLeft: { value: this.colorMatrixLeft },\n        colorMatrixRight: { value: this.colorMatrixRight },\n      },\n\n      vertexShader: [\n        'varying vec2 vUv;',\n\n        'void main() {',\n\n        '\tvUv = vec2( uv.x, uv.y );',\n        '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n        '}',\n      ].join('\\n'),\n\n      fragmentShader: [\n        'uniform sampler2D mapLeft;',\n        'uniform sampler2D mapRight;',\n        'varying vec2 vUv;',\n\n        'uniform mat3 colorMatrixLeft;',\n        'uniform mat3 colorMatrixRight;',\n\n        'void main() {',\n\n        '\tvec2 uv = vUv;',\n\n        '\tvec4 colorL = texture2D( mapLeft, uv );',\n        '\tvec4 colorR = texture2D( mapRight, uv );',\n\n        '\tvec3 color = clamp(',\n        '\t\t\tcolorMatrixLeft * colorL.rgb +',\n        '\t\t\tcolorMatrixRight * colorR.rgb, 0., 1. );',\n\n        '\tgl_FragColor = vec4(',\n        '\t\t\tcolor.r, color.g, color.b,',\n        '\t\t\tmax( colorL.a, colorR.a ) );',\n\n        '\t#include <tonemapping_fragment>',\n        `\t#include <${parseInt(REVISION.replace(/\\D+/g, '')) >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>`,\n\n        '}',\n      ].join('\\n'),\n    })\n\n    const _mesh = new Mesh(new PlaneGeometry(2, 2), _material)\n    _scene.add(_mesh)\n\n    this.setSize = function (width, height) {\n      renderer.setSize(width, height)\n\n      const pixelRatio = renderer.getPixelRatio()\n\n      _renderTargetL.setSize(width * pixelRatio, height * pixelRatio)\n      _renderTargetR.setSize(width * pixelRatio, height * pixelRatio)\n    }\n\n    this.render = function (scene, camera) {\n      const currentRenderTarget = renderer.getRenderTarget()\n\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld()\n\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld()\n\n      _stereo.update(camera)\n\n      renderer.setRenderTarget(_renderTargetL)\n      renderer.clear()\n      renderer.render(scene, _stereo.cameraL)\n\n      renderer.setRenderTarget(_renderTargetR)\n      renderer.clear()\n      renderer.render(scene, _stereo.cameraR)\n\n      renderer.setRenderTarget(null)\n      renderer.render(_scene, _camera)\n\n      renderer.setRenderTarget(currentRenderTarget)\n    }\n\n    this.dispose = function () {\n      _renderTargetL.dispose()\n      _renderTargetR.dispose()\n      _mesh.geometry.dispose()\n      _mesh.material.dispose()\n    }\n  }\n}\n\nexport { AnaglyphEffect }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}