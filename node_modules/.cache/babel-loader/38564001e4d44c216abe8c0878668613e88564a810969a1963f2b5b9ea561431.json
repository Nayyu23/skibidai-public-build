{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _asyncToGenerator from \"C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _excluded = [\"unsuspend\", \"start\", \"crossOrigin\", \"muted\", \"loop\", \"hls\"],\n  _excluded2 = [\"children\", \"src\"];\nimport * as React from 'react';\nimport { useRef, useEffect } from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { suspend } from 'suspend-react';\nvar _window$document, _window$navigator;\nvar IS_BROWSER = typeof window !== 'undefined' && typeof ((_window$document = window.document) == null ? void 0 : _window$document.createElement) === 'function' && typeof ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.userAgent) === 'string';\nvar _HLSModule = null;\nfunction getHLS(_x, _x2) {\n  return _getHLS.apply(this, arguments);\n}\nfunction _getHLS() {\n  _getHLS = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url, config) {\n    var _HLSModule2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(IS_BROWSER && url.pathname.endsWith('.m3u8'))) {\n            _context2.next = 10;\n            break;\n          }\n          if (!((_HLSModule2 = _HLSModule) !== null && _HLSModule2 !== void 0)) {\n            _context2.next = 5;\n            break;\n          }\n          _HLSModule2;\n          _context2.next = 8;\n          break;\n        case 5:\n          _context2.next = 7;\n          return import('hls.js');\n        case 7:\n          _HLSModule = _context2.sent;\n        case 8:\n          if (!_HLSModule.default.isSupported()) {\n            _context2.next = 10;\n            break;\n          }\n          return _context2.abrupt(\"return\", new _HLSModule.default(_objectSpread({}, config)));\n        case 10:\n          return _context2.abrupt(\"return\", null);\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _getHLS.apply(this, arguments);\n}\nfunction useVideoTexture(src) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$unsuspend = _ref.unsuspend,\n    unsuspend = _ref$unsuspend === void 0 ? 'loadedmetadata' : _ref$unsuspend,\n    _ref$start = _ref.start,\n    start = _ref$start === void 0 ? true : _ref$start,\n    _ref$crossOrigin = _ref.crossOrigin,\n    crossOrigin = _ref$crossOrigin === void 0 ? 'anonymous' : _ref$crossOrigin,\n    _ref$muted = _ref.muted,\n    muted = _ref$muted === void 0 ? true : _ref$muted,\n    _ref$loop = _ref.loop,\n    loop = _ref$loop === void 0 ? true : _ref$loop,\n    _ref$hls = _ref.hls,\n    hls = _ref$hls === void 0 ? {} : _ref$hls,\n    videoProps = _objectWithoutProperties(_ref, _excluded);\n  var url = new URL(typeof src === 'string' ? src : '', window.location.href);\n  var hlsRef = useRef(null);\n  var videoRef = useRef(null);\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  var texture = suspend(function () {\n    return new Promise( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {\n        var video, _hls, texture;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              video = Object.assign(document.createElement('video'), _objectSpread({\n                src: typeof src === 'string' && src || undefined,\n                srcObject: src instanceof MediaStream && src || undefined,\n                crossOrigin: crossOrigin,\n                loop: loop,\n                muted: muted\n              }, videoProps));\n              videoRef.current = video;\n\n              // hlsjs extension\n              if (!(typeof src === 'string')) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 5;\n              return getHLS(url, hls);\n            case 5:\n              _hls = hlsRef.current = _context.sent;\n              if (_hls) {\n                _hls.attachMedia(video);\n                _hls.on('hlsMediaAttached', function () {\n                  _hls.loadSource(src);\n                });\n              } else {\n                video.src = src;\n              }\n              _context.next = 10;\n              break;\n            case 9:\n              if (src instanceof MediaStream) {\n                video.srcObject = src;\n              }\n            case 10:\n              texture = new THREE.VideoTexture(video);\n              if ('colorSpace' in texture) texture.colorSpace = gl.outputColorSpace;else texture.encoding = gl.outputEncoding;\n              video.addEventListener(unsuspend, function () {\n                return res(texture);\n              });\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x3) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }, [src]);\n  useEffect(function () {\n    start && texture.image.play();\n    return function () {\n      if (hlsRef.current) {\n        hlsRef.current.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [texture, start]);\n  return texture;\n}\n\n//\n\nvar VideoTexture = function VideoTexture(_ref3) {\n  var children = _ref3.children,\n    src = _ref3.src,\n    config = _objectWithoutProperties(_ref3, _excluded2);\n  var ret = useVideoTexture(src, config);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children == null ? void 0 : children(ret));\n};\nexport { VideoTexture, useVideoTexture };","map":{"version":3,"names":["React","useRef","useEffect","THREE","useThree","suspend","_window$document","_window$navigator","IS_BROWSER","window","document","createElement","navigator","userAgent","_HLSModule","getHLS","_x","_x2","_getHLS","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","url","config","_HLSModule2","wrap","_callee2$","_context2","prev","next","pathname","endsWith","sent","default","isSupported","abrupt","_objectSpread","stop","useVideoTexture","src","_ref","length","undefined","_ref$unsuspend","unsuspend","_ref$start","start","_ref$crossOrigin","crossOrigin","_ref$muted","muted","_ref$loop","loop","_ref$hls","hls","videoProps","_objectWithoutProperties","_excluded","URL","location","href","hlsRef","videoRef","gl","state","texture","Promise","_ref2","_callee","res","video","_hls","_callee$","_context","Object","assign","srcObject","MediaStream","current","attachMedia","on","loadSource","VideoTexture","colorSpace","outputColorSpace","encoding","outputEncoding","addEventListener","_x3","image","play","destroy","_ref3","children","_excluded2","ret","Fragment"],"sources":["C:/Users/Nayyu/Desktop/skibidai-public-build/node_modules/@react-three/drei/core/VideoTexture.js"],"sourcesContent":["import * as React from 'react';\nimport { useRef, useEffect } from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { suspend } from 'suspend-react';\n\nvar _window$document, _window$navigator;\nconst IS_BROWSER = typeof window !== 'undefined' && typeof ((_window$document = window.document) == null ? void 0 : _window$document.createElement) === 'function' && typeof ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.userAgent) === 'string';\nlet _HLSModule = null;\nasync function getHLS(url, config) {\n  if (IS_BROWSER && url.pathname.endsWith('.m3u8')) {\n    var _HLSModule2;\n    (_HLSModule2 = _HLSModule) !== null && _HLSModule2 !== void 0 ? _HLSModule2 : _HLSModule = await import('hls.js');\n    if (_HLSModule.default.isSupported()) {\n      return new _HLSModule.default({\n        ...config\n      });\n    }\n  }\n  return null;\n}\nfunction useVideoTexture(src, {\n  unsuspend = 'loadedmetadata',\n  start = true,\n  crossOrigin = 'anonymous',\n  muted = true,\n  loop = true,\n  hls = {},\n  ...videoProps\n} = {}) {\n  const url = new URL(typeof src === 'string' ? src : '', window.location.href);\n  const hlsRef = useRef(null);\n  const videoRef = useRef(null);\n  const gl = useThree(state => state.gl);\n  const texture = suspend(() => new Promise(async res => {\n    const video = Object.assign(document.createElement('video'), {\n      src: typeof src === 'string' && src || undefined,\n      srcObject: src instanceof MediaStream && src || undefined,\n      crossOrigin,\n      loop,\n      muted,\n      ...videoProps\n    });\n    videoRef.current = video;\n\n    // hlsjs extension\n    if (typeof src === 'string') {\n      const _hls = hlsRef.current = await getHLS(url, hls);\n      if (_hls) {\n        _hls.attachMedia(video);\n        _hls.on('hlsMediaAttached', () => {\n          _hls.loadSource(src);\n        });\n      } else {\n        video.src = src;\n      }\n    } else if (src instanceof MediaStream) {\n      video.srcObject = src;\n    }\n    const texture = new THREE.VideoTexture(video);\n    if ('colorSpace' in texture) texture.colorSpace = gl.outputColorSpace;else texture.encoding = gl.outputEncoding;\n    video.addEventListener(unsuspend, () => res(texture));\n  }), [src]);\n  useEffect(() => {\n    start && texture.image.play();\n    return () => {\n      if (hlsRef.current) {\n        hlsRef.current.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [texture, start]);\n  return texture;\n}\n\n//\n\nconst VideoTexture = ({\n  children,\n  src,\n  ...config\n}) => {\n  const ret = useVideoTexture(src, config);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children == null ? void 0 : children(ret));\n};\n\nexport { VideoTexture, useVideoTexture };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}